---
title: "『内部構造から学ぶ PostgreSQL 設計・運用計画の鉄則』を読んだ"
date: 2021-05-01 09:00 +0900
---

# モチベーション
普段メインで関わっているプロダクトでは PostgreSQL を使っているのですが、  

- MySQL や Oracle については経験があるが、PostgreSQL を実務で扱うのは初めて
- 普段仕事で使ってる範囲については把握しているが、体系的な勉強をしたことがなく、漠然と不安
- 会社の若者が「この本読んでみようと思ってます」と見せてくれて、ちょっと気になってた

ということで読んでみました。  

- [[改訂新版]内部構造から学ぶPostgreSQL 設計・運用計画の鉄則 (Software Design plus) | 勝俣 智成, 佐伯 昌樹, 原田 登志 |本 | 通販 | Amazon](https://www.amazon.co.jp/dp/4297100894/)

# 本書の内容
タイトルの通り、PostgreSQL の内部構造がどうなってるかが丁寧に説明されてて勉強になる本でした。  

- アーキテクチャの全体観の説明
- 問い合わせ処理の大まかな流れ
- PostgreSQL 用語の詳細な解説（WAL、AUTO VACUUM、HOT、……）
- テーブルデータを保存するファイルのレイアウトと使われ方
- 実行計画の読み解き方、パフォーマンスチューニング

等々のトピックが詳細に説明されており、「こういう仕組みになってるよ」「だからこうするのが推奨と言われているよ」という説明がスッと頭に入って良かったです。  

「テーブルファイルの先頭 24 バイトはページヘッダという領域になっていて…」みたいな内容まで書いてあってちょっと面食らったけど、これ、公式ドキュメントにも載ってる情報なんですね。ここまで載せるのか…。  

- https://www.postgresql.jp/document/12/html/storage-page-layout.html

読書メモはこんな感じ。（力尽きてメモってないですが）Part4 の「チューニング編」は折に触れて読み返したい。  

- [内部構造から学ぶ PostgreSQL 設計・運用計画の鉄則_読書メモ](https://gist.github.com/gushernobindsme/ebd2277f9236477601d743d0dcde4cd8)

# おわりに
刊行日の関係で PostgreSQL 10 ベースの説明になってるのが少し悩ましい感じではありますが、公式資料の物量に圧倒されて二の足を踏んでる人は読んでみるといいんじゃないでしょうか。  